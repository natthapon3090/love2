<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="style.css">

<style>
.card{
  width: clamp(340px, 92vw, 400px);
  margin: 0 auto;
}

/* ================= HEART MOSAIC ================= */
.heart-wrap{
  display:flex;
  justify-content:center;
  margin:18px 0;
  opacity:0;
  transition:.6s ease;
}
.heart-wrap.show{opacity:1}

.heart{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:6px;
}

.heart div{
  width:44px;
  height:44px;
  background-size:cover;
  background-position:center;
  border-radius:4px;
  opacity:0;
  transform:scale(.4);
  transition:.35s ease;
  box-shadow:0 4px 10px rgba(0,0,0,.25);
}

/* CENTER HEART */
.heart .center{
  background:#e74c3c;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:20px;
}

/* ===== HEART SHAPE (‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏ñ‡∏ß‡∏ó‡∏µ‡πà 2 ‡∏≠‡∏µ‡∏Å 2 ‡∏£‡∏π‡∏õ‡πÅ‡∏•‡πâ‡∏ß) ===== */
/* row 1 */
.heart div:nth-child(1){grid-column:2}
.heart div:nth-child(2){grid-column:3}
.heart div:nth-child(3){grid-column:5}
.heart div:nth-child(4){grid-column:6}

/* row 2 (‡πÄ‡∏ï‡πá‡∏° 7 ‡∏ä‡πà‡∏≠‡∏á) */
.heart div:nth-child(5){grid-column:1}
.heart div:nth-child(6){grid-column:2}
.heart div:nth-child(7){grid-column:3}
.heart div:nth-child(8){grid-column:4}
.heart div:nth-child(9){grid-column:5}
.heart div:nth-child(10){grid-column:6}
.heart div:nth-child(11){grid-column:7}

/* row 3 */
.heart div:nth-child(12){grid-column:2}
.heart div:nth-child(13){grid-column:3}
.heart div:nth-child(14){grid-column:4}
.heart div:nth-child(15){grid-column:5}
.heart div:nth-child(16){grid-column:6}

/* row 4 */
.heart div:nth-child(17){grid-column:3}
.heart div:nth-child(18){grid-column:4}
.heart div:nth-child(19){grid-column:5}

/* row 5 */
.heart div:nth-child(20){grid-column:4}

/* ================= SLIDESHOW ================= */
.slideshow{
  display:none;
  position:relative;
  width:100%;
  height:220px;
  border-radius:18px;
  overflow:hidden;
  box-shadow:0 14px 30px rgba(0,0,0,.35);
}

.slide{
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  opacity:0;
  transition:1s ease;
}
.slide.active{opacity:1}

/* ================= VOICE ================= */
.voice{
  background:linear-gradient(180deg,#6a63ff,#5a55f0);
  border-radius:18px;
  padding:14px 16px;
  color:#fff;
  display:flex;
  align-items:center;
  gap:12px;
  box-shadow:0 14px 30px rgba(90,85,240,.45);
  cursor:pointer;
}
.voice-play{
  width:40px;
  height:40px;
  border-radius:50%;
  background:rgba(255,255,255,.2);
  display:flex;
  align-items:center;
  justify-content:center;
}
</style>
</head>

<body>

<div class="card">
  <h1 class="type">‡πÄ‡∏û‡∏•‡∏á‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ üéµ</h1>
  <p class="type">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥‡∏Ñ‡πà‡∏≠‡∏¢ ‡πÜ ‡∏£‡∏ß‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à</p>

  <!-- ‚ù§Ô∏è HEART -->
  <div class="heart-wrap" id="heartWrap">
    <div class="heart" id="heart">
      <!-- 20 blocks -->
      <div></div><div></div><div></div><div></div>
      <div></div><div></div><div></div><div></div><div></div><div></div><div></div>
      <div></div><div></div><div class="center">‚ù§Ô∏è</div><div></div><div></div>
      <div></div><div></div><div></div>
      <div></div>
    </div>
  </div>

  <!-- üñº SLIDESHOW -->
  <div class="slideshow" id="slideshow"></div>

  <!-- üéß AUDIO -->
  <audio id="audio">
    <source src="QLER ‡∏à‡∏µ‡∏ö.mp3" type="audio/mpeg">
  </audio>

  <div class="voice" onclick="toggleVoice()">
    <div class="voice-play" id="icon">‚ñ∂Ô∏è</div>
    ‡∏Å‡∏î‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á
  </div>
</div>

<script>
const audio = document.getElementById("audio");
const icon = document.getElementById("icon");
const heartWrap = document.getElementById("heartWrap");
const blocks = document.querySelectorAll(".heart div");
const slideshow = document.getElementById("slideshow");

/* ‡∏£‡∏π‡∏õ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á */
const images = [
 "https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e",
 "https://images.unsplash.com/photo-1500530855697-b586d89ba3ee",
 "https://images.unsplash.com/photo-1495567720989-cebdbdd97913",
 "https://images.unsplash.com/photo-1517841905240-472988babdf9"
];

/* ‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ (‡∏¢‡∏Å‡πÄ‡∏ß‡πâ‡∏ô‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏Å‡∏•‡∏≤‡∏á) */
let imgIndex = 0;
blocks.forEach(b=>{
  if(!b.classList.contains("center")){
    b.style.backgroundImage = `url(${images[imgIndex % images.length]})`;
    imgIndex++;
  }
});

/* ‡∏™‡∏£‡πâ‡∏≤‡∏á slideshow */
images.forEach((img,i)=>{
  const s = document.createElement("div");
  s.className = "slide" + (i===0 ? " active":"");
  s.style.backgroundImage = `url(${img})`;
  slideshow.appendChild(s);
});

let revealIndex = 0;
let revealTimer = null;
let slideshowTimer = null;
let slideshowIndex = 0;

function toggleVoice(){
  if(audio.paused){
    audio.play();
    icon.innerText="‚è∏";
    heartWrap.classList.add("show");
    startReveal();
  }else{
    audio.pause();
    icon.innerText="‚ñ∂Ô∏è";
  }
}

/* ===== REVEAL EVERY 1.5s ===== */
function startReveal(){
  if(revealTimer) return;

  revealTimer = setInterval(()=>{
    if(audio.paused) return;

    if(revealIndex < blocks.length){
      blocks[revealIndex].style.opacity = 1;
      blocks[revealIndex].style.transform = "scale(1)";
      revealIndex++;
    }else{
      clearInterval(revealTimer);
      heartWrap.style.display="none";
      slideshow.style.display="block";
      startSlideshow();
    }
  }, 1500);
}

/* ===== SLIDESHOW ===== */
function startSlideshow(){
  if(slideshowTimer) return;

  slideshowTimer = setInterval(()=>{
    if(audio.paused) return;

    const slides = document.querySelectorAll(".slide");
    slides[slideshowIndex].classList.remove("active");
    slideshowIndex = (slideshowIndex + 1) % slides.length;
    slides[slideshowIndex].classList.add("active");
  }, 3500);
}
</script>

</body>
</html>
